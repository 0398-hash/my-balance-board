<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Balance Board</title>
<style>
body { margin: 0; font-family: sans-serif; background: linear-gradient(135deg, #e0f2fe 0%, #f3e8ff 50%, #fce7f3 100%); min-height: 100vh; padding: 20px; }
.container { max-width: 800px; margin: 0 auto; }
.header { text-align: center; margin-bottom: 30px; }
.header h1 { font-size: 32px; color: #374151; margin: 0; }
.header p { color: #6b7280; font-size: 14px; }
.card { background: white; border-radius: 20px; padding: 30px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
.card.editing { background: #fef3c7; border: 4px solid #fbbf24; }
.label { font-size: 18px; font-weight: bold; color: #374151; margin-bottom: 10px; display: block; }
input[type="date"], input[type="number"], textarea { width: 100%; padding: 15px; font-size: 16px; border: 2px solid #e5e7eb; border-radius: 10px; box-sizing: border-box; }
textarea { resize: none; height: 100px; }
.slider-container { margin: 30px 0; }
.slider { width: 100%; height: 8px; border-radius: 4px; outline: none; -webkit-appearance: none; }
.slider::-webkit-slider-thumb { -webkit-appearance: none; width: 40px; height: 40px; background: white; border: 4px solid #86efac; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
.slider::-moz-range-thumb { width: 40px; height: 40px; background: white; border: 4px solid #86efac; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
.slider.mental::-webkit-slider-thumb { border-color: #fca5a5; }
.slider.mental::-moz-range-thumb { border-color: #fca5a5; }
.btn { width: 100%; padding: 20px; font-size: 18px; font-weight: bold; color: white; border: none; border-radius: 10px; cursor: pointer; margin-top: 10px; }
.btn:hover { opacity: 0.9; }
.btn-primary { background: linear-gradient(135deg, #a78bfa 0%, #ec4899 100%); }
.btn-success { background: linear-gradient(135deg, #34d399 0%, #14b8a6 100%); }
.btn-info { background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%); }
.record { background: #f9fafb; padding: 15px; margin: 10px 0; border-radius: 10px; border: 2px solid #e5e7eb; }
.record:hover { border-color: #a78bfa; }
.badge { display: inline-block; padding: 5px 10px; border-radius: 8px; font-size: 12px; font-weight: bold; margin: 0 5px; }
.badge-green { background: #d1fae5; color: #065f46; }
.badge-red { background: #fee2e2; color: #991b1b; }
.notification { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: #10b981; color: white; padding: 15px 30px; border-radius: 10px; font-weight: bold; z-index: 1000; box-shadow: 0 4px 6px rgba(0,0,0,0.2); }
.hidden { display: none; }
</style>
</head>
<body>

<div id="notification" class="notification hidden"></div>

<div class="container">
  <div class="header">
    <h1>My Balance Board</h1>
    <p>ã‚ãªãŸã®ãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ãˆã‚‹åŒ–</p>
  </div>

  <div id="inputCard" class="card">
    <label class="label">ğŸ“… è¨˜éŒ²ã™ã‚‹æ—¥ä»˜</label>
    <input type="date" id="dateInput">

    <div class="slider-container">
      <label class="label">ğŸ§ ä½“ã®èª¿å­ <span id="physicalValue">5</span>/10</label>
      <input type="range" min="1" max="10" value="5" class="slider" id="physicalSlider">
    </div>

    <div class="slider-container">
      <label class="label">ğŸ’— å¿ƒã®èª¿å­ <span id="mentalValue">5</span>/10</label>
      <input type="range" min="1" max="10" value="5" class="slider mental" id="mentalSlider">
    </div>

    <label class="label">ğŸ“ ä»Šæ—¥ã®ãƒ¡ãƒ¢</label>
    <textarea id="memoInput" placeholder="æ°—ã«ãªã£ãŸã“ã¨ã€æ„Ÿã˜ãŸã“ã¨..."></textarea>

    <button class="btn btn-primary" onclick="saveRecord()">âœ“ è¨˜éŒ²ã™ã‚‹</button>
  </div>

  <div id="recordsCard" class="card hidden">
    <h2>ğŸ“‹ è¨˜éŒ²ä¸€è¦§</h2>
    <div id="recordsList"></div>
  </div>

  <div id="exportCard" class="card hidden">
    <h2>ğŸ“¤ ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰</h2>
    <button class="btn btn-info" onclick="copyForAI()">ğŸ“‹ AIåˆ†æç”¨ã«ã‚³ãƒ”ãƒ¼</button>
    <button class="btn btn-success" onclick="generateEmail()">ğŸ“¨ ãƒ¡ãƒ¼ãƒ«æœ¬æ–‡ã‚’ä½œæˆ</button>
  </div>
</div>

<script>
let records = [];

function init() {
  const saved = localStorage.getItem('balanceRecords');
  if (saved) records = JSON.parse(saved);
  
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('dateInput').value = today;
  document.getElementById('dateInput').max = today;
  
  document.getElementById('physicalSlider').oninput = function() {
    document.getElementById('physicalValue').textContent = this.value;
  };
  
  document.getElementById('mentalSlider').oninput = function() {
    document.getElementById('mentalValue').textContent = this.value;
  };
  
  updateDisplay();
}

function saveRecord() {
  const date = document.getElementById('dateInput').value;
  const physical = parseInt(document.getElementById('physicalSlider').value);
  const mental = parseInt(document.getElementById('mentalSlider').value);
  const memo = document.getElementById('memoInput').value;
  
  records = records.filter(r => r.date !== date);
  records.push({ date, physical, mental, memo });
  records.sort((a, b) => new Date(a.date) - new Date(b.date));
  
  localStorage.setItem('balanceRecords', JSON.stringify(records));
  showNotification('è¨˜éŒ²ã—ã¾ã—ãŸï¼');
  updateDisplay();
}

function updateDisplay() {
  if (records.length === 0) {
    document.getElementById('recordsCard').classList.add('hidden');
    document.getElementById('exportCard').classList.add('hidden');
    return;
  }
  
  document.getElementById('recordsCard').classList.remove('hidden');
  document.getElementById('exportCard').classList.remove('hidden');
  
  const sorted = [...records].sort((a, b) => new Date(b.date) - new Date(a.date));
  let html = '';
  sorted.forEach(r => {
    html += `<div class="record">
      <strong>${r.date}</strong>
      <span class="badge badge-green">ä½“ ${r.physical}</span>
      <span class="badge badge-red">å¿ƒ ${r.mental}</span>
      ${r.memo ? `<p style="margin-top:10px">${r.memo}</p>` : ''}
    </div>`;
  });
  document.getElementById('recordsList').innerHTML = html;
}

function showNotification(msg) {
  const notif = document.getElementById('notification');
  notif.textContent = msg;
  notif.classList.remove('hidden');
  setTimeout(() => notif.classList.add('hidden'), 3000);
}

function copyForAI() {
  if (records.length === 0) {
    showNotification('è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“');
    return;
  }
  
  let text = 'ç§ã¯è‡ªåˆ†ã®çŠ¶æ…‹ã‚’èª¬æ˜ã™ã‚‹ã®ãŒè‹¦æ‰‹ã§ã™ã€‚ä»¥ä¸‹ã®è¨˜éŒ²ã‚’åˆ†æã—ã¦ãã ã•ã„ã€‚\n\n';
  records.forEach(r => {
    text += `æ—¥ä»˜: ${r.date}\nä½“: ${r.physical}/10\nå¿ƒ: ${r.mental}/10\nãƒ¡ãƒ¢: ${r.memo || 'ãªã—'}\n\n`;
  });
  
  navigator.clipboard.writeText(text).then(() => {
    showNotification('âœ“ ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
  }).catch(() => {
    alert(text);
  });
}

function generateEmail() {
  if (records.length === 0) {
    showNotification('è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“');
    return;
  }
  
  let data = '';
  records.forEach(r => {
    data += `æ—¥ä»˜: ${r.date}\nä½“: ${r.physical}/10\nå¿ƒ: ${r.mental}/10\nãƒ¡ãƒ¢: ${r.memo || 'ãªã—'}\n\n`;
  });
  
  const email = `ä»¶å: ç§ã®ä½“èª¿ãƒ¬ãƒãƒ¼ãƒˆ

æœ¬æ–‡:

æ”¯æ´å“¡æ§˜

ãŠç–²ã‚Œæ§˜ã§ã™ã€‚ä½“èª¿è¨˜éŒ²ã‚’é€ä»˜ã—ã¾ã™ã€‚

ã€ãƒ‡ãƒ¼ã‚¿ã€‘
${data}

ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚`;
  
  navigator.clipboard.writeText(email).then(() => {
    showNotification('âœ“ ãƒ¡ãƒ¼ãƒ«æœ¬æ–‡ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
  }).catch(() => {
    alert(email);
  });
}

init();
</script>

</body>
</html>